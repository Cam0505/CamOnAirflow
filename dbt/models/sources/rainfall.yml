version: 2

sources:
  - name: rainfall
    database: camonairflow
    schema: rainfall

    tables:
      - name: ice_climbing_rainfall
        data_tests:
          - dbt_utils.unique_combination_of_columns:
              combination_of_columns:
                - date
                - location
        freshness:
          warn_after: {count: 6, period: day}
          error_after: {count: 14, period: day}
        loaded_at_field: CAST(date AS TIMESTAMP)
        columns:
          - name: date
            description: ""
          - name: location
            description: "Ice Climbing Location"
          - name: country
            description: "{{ doc('country') }}" 
          - name: rain_sum
            description: ""
          - name: precipitation_sum
            description: ""
      - name: ice_climbing_lookup
        columns:
          - name: name
            description: "Ice Climbing Location"
          - name: country
            description: "{{ doc('country') }}"
          - name: lat
            description: "{{ doc('latitude') }}"
          - name: lon
            description: "{{ doc('longitude') }}"
          - name: timezone
            description: ''
          - name: last_updated
            description: ''